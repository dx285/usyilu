function initChart(){getOrderChart(orderChart),getMemberChart(memberChart)}function getOrderChart(orderChart){var starttime=$("#starttime").val(),endtime=$("#endtime").val();$.ajax({type:"POST",url:URL+"index/ajax_order_num_graph",data:{starttime:starttime,endtime:endtime},dataType:"json",beforeSend:function(){orderChart.showLoading({text:"正在加载数据..."})},success:function(data){if(data){orderChart.hideLoading();var line_num=eval(data.line),hotel_num=eval(data.hotel),car_num=eval(data.car),spot_num=eval(data.spot),visa_num=eval(data.visa),tuan_num=eval(data.tuan),ty_num=eval(data.ty),label=eval(data.labels),option={title:{text:"",subtext:""},tooltip:{trigger:"axis"},legend:{data:["线路","酒店","租车","门票","签证","团购","通用"]},toolbox:{show:!1,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!1,xAxis:[{type:"category",boundaryGap:!1,data:function(){return label?label:["周一","周二","周三","周四","周五","周六","周日"]}()}],yAxis:[{type:"value",axisLabel:{formatter:"{value} 笔"}}],series:[{name:"线路",type:"line",smooth:!0,data:function(){return line_num}()},{name:"酒店",type:"line",smooth:!0,data:function(){return hotel_num}()},{name:"租车",type:"line",smooth:!0,data:function(){return car_num}()},{name:"门票",type:"line",smooth:!0,data:function(){return spot_num}()},{name:"签证",type:"line",smooth:!0,data:function(){return visa_num}()},{name:"团购",type:"line",smooth:!0,data:function(){return tuan_num}()},{name:"通用",type:"line",smooth:!0,data:function(){return ty_num}()}]};orderChart.setOption(option)}}})}function getVisitChart(visitChart){var starttime=$("#starttime").val(),endtime=$("#endtime").val();$.ajax({type:"POST",url:URL+"index/ajax_ippv_num",data:{starttime:starttime,endtime:endtime},beforeSend:function(){visitChart.showLoading({text:"正在加载数据..."})},dataType:"json",success:function(data){visitChart.hideLoading();var ip_num=eval(data.ip),pv_num=eval(data.pv),label=eval(data.labels),option={title:{text:"",subtext:""},tooltip:{trigger:"axis"},legend:{data:["IP:点击量","PV:访问量"]},toolbox:{show:!1,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!1,xAxis:[{type:"category",boundaryGap:!1,data:function(){return label?label:["周一","周二","周三","周四","周五","周六","周日"]}()}],yAxis:[{type:"value"}],series:[{name:"IP:点击量",type:"line",smooth:!0,data:function(){return ip_num}()},{name:"PV:访问量",type:"line",smooth:!0,data:function(){return pv_num}()}]};visitChart.setOption(option)}})}function getMemberChart(memberChart){var starttime=$("#starttime").val(),endtime=$("#endtime").val();$.ajax({type:"POST",url:URL+"index/ajax_member_num",data:{starttime:starttime,endtime:endtime},dataType:"json",beforeSend:function(){memberChart.showLoading({text:"正在加载数据..."})},success:function(data){memberChart.hideLoading();var membernum=eval(data.member),label=eval(data.labels),option={title:{text:"",subtext:""},tooltip:{trigger:"axis"},legend:{data:["新增会员"]},toolbox:{show:!1,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar","stack","tiled"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:function(){return label?label:["周一","周二","周三","周四","周五","周六","周日"]}()}],yAxis:[{type:"value"}],series:[{name:"新增会员",type:"line",smooth:!0,data:function(){return membernum}()}]};memberChart.setOption(option)}})}var orderChart,visitChart,memberChart;$(function(){require.config({paths:{echarts:"http://echarts.baidu.com/build/dist"}}),require(["echarts","echarts/chart/line","echarts/chart/bar"],function(t){orderChart=t.init(document.getElementById("order-count-box")),memberChart=t.init(document.getElementById("member-count-box")),initChart()})});